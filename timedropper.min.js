!function(t){t.fn.timeDropper=function(e,a){return t(this).each(function(){var a,n=t(this),d=!1,o=!1,i=function(t){return 10>t?"0"+t:t},r=t(".td-clock").length,s=null,l=t.extend({format:"h:mm a",autoswitch:!1,meridians:!1,mousewheel:!1,setCurrentTime:!0,init_animation:"fadein",primaryColor:"#1977CC",borderColor:"#1977CC",backgroundColor:"#FFF",textColor:"#555",format24Hours:!1,earliestTime:null,latestTime:null},e);n.prop({readonly:!0}).addClass("td-input"),t("body").append('<div class="td-wrap td-n2" id="td-clock-'+r+'"><div class="td-overlay"></div><div class="td-clock td-init"><div class="td-deg td-n"><div class="td-select"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 35.4" enable-background="new 0 0 100 35.4" xml:space="preserve"><g><path fill="none" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M98.1,33C85.4,21.5,68.5,14.5,50,14.5S14.6,21.5,1.9,33"/><line fill="none" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" x1="1.9" y1="33" x2="1.9" y2="28.6"/><line fill="none" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" x1="1.9" y1="33" x2="6.3" y2="33"/><line fill="none" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" x1="98.1" y1="33" x2="93.7" y2="33"/><line fill="none" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" x1="98.1" y1="33" x2="98.1" y2="28.6"/></g></svg></div></div><div class="td-medirian"><span class="td-icon-am td-n">AM</span><span class="td-icon-pm td-n">PM</span></div><div class="td-lancette"><div></div><div></div></div><div class="td-time"><span class="on"></span>:<span></span></div></div></div>'),t("head").append("<style>#td-clock-"+r+" .td-clock {color:"+l.textColor+";background: "+l.backgroundColor+"; box-shadow: 0 0 0 1px "+l.borderColor+",0 0 0 8px rgba(0, 0, 0, 0.05); } #td-clock-"+r+" .td-clock .td-time span.on { color:"+l.primaryColor+"} #td-clock-"+r+" .td-clock:before { border-color: "+l.borderColor+"} #td-clock-"+r+" .td-select:after { box-shadow: 0 0 0 1px "+l.borderColor+" } #td-clock-"+r+" .td-clock:before,#td-clock-"+r+" .td-select:after {background: "+l.backgroundColor+";} #td-clock-"+r+" .td-lancette {border: 2px solid "+l.primaryColor+"; opacity:0.1}#td-clock-"+r+" .td-lancette div:after { background: "+l.primaryColor+";} #td-clock-"+r+" .td-bulletpoint div:after { background:"+l.primaryColor+"; opacity:0.1}</style>");var c=t("#td-clock-"+r),f=c.find(".td-overlay"),u=c.find(".td-clock");u.find("svg").attr("style","stroke:"+l.borderColor);var p=-1,v=0,h=0,g=function(){var t=u.find(".td-time span.on"),e=parseInt(t.attr("data-id"));0==t.index()?deg=Math.round(360*e/23):deg=Math.round(360*e/59),p=-1,v=deg,h=deg},k=function(t){var e=u.find(".td-time span.on"),a=e.attr("data-id");a||(a=0);var d=Math.round(23*t/360),o=Math.round(59*t/360);if(0==e.index()?(e.attr("data-id",i(d)),l.meridians&&!l.format24Hours&&(d>=12&&24>d?(u.find(".td-icon-pm").addClass("td-on"),u.find(".td-icon-am").removeClass("td-on")):(u.find(".td-icon-am").addClass("td-on"),u.find(".td-icon-pm").removeClass("td-on")),d>12&&(d-=12),0==d&&(d=12)),e.text(i(d))):e.attr("data-id",i(o)).text(i(o)),h=t,u.find(".td-deg").css("transform","rotate("+t+"deg)"),0==e.index()){var r=Math.round(360*d/12);u.find(".td-lancette div:last").css("transform","rotate("+r+"deg)")}else u.find(".td-lancette div:first").css("transform","rotate("+t+"deg)");var s=u.find(".td-time span:first").attr("data-id"),c=u.find(".td-time span:last").attr("data-id");if(l.format24Hours)d=Math.round(s);else{if(Math.round(s)>=12&&Math.round(s)<24)var d=Math.round(s)-12,f="pm",m="PM";else var d=Math.round(s),f="am",m="AM";0==d&&(d=12)}var p=l.format.replace(/\b(H)\b/g,Math.round(s)).replace(/\b(h)\b/g,Math.round(d)).replace(/\b(m)\b/g,Math.round(c)).replace(/\b(HH)\b/g,i(Math.round(s))).replace(/\b(hh)\b/g,i(Math.round(d))).replace(/\b(mm)\b/g,i(Math.round(c)));p=l.format24Hours?p.replace(/\b(a)\b/g,"").replace(/\b(A)\b/g,""):p.replace(/\b(a)\b/g,f).replace(/\b(A)\b/g,m),n.val(p)},b=function(){var t=u.find(".td-time span:first").attr("data-id"),e=u.find(".td-time span:last").attr("data-id");x(t,e)},x=function(t,e){if(t&&e&&parseInt(t)>=0&&parseInt(t)<=23&&parseInt(e)>=0&&parseInt(e)<=59){if(t=parseInt(t),m=parseInt(e),l.earliestTime){var a=parseInt(l.earliestTime.split(":")[0]),n=parseInt(l.earliestTime.split(":")[1]);a>t?(t=a,m=n):t==a&&m<n&&(m=n)}if(l.latestTime){var d=parseInt(l.latestTime.split(":")[0]),o=parseInt(l.latestTime.split(":")[1]);t>d?(t=d,m=o):t==d&&m>o&&(m=o)}w(t,m)}},C=function(t){return t>=12&&24>t?t-12:t},w=function(e,a){var n,d,o=u.find(".td-time span:first"),i=u.find(".td-time span:last");n=e,d=a,l.meridians&&(n=C(n)),10>e&&(n="0"+e),10>a&&(d="0"+a),o.attr("data-id",e).text(n),i.attr("data-id",a).text(d),v=t(i).hasClass("on")?Math.round(360*a/59):Math.round(360*e/23),k(v),h=v,p=-1,u.find(".td-lancette div:first").css("transform","rotate("+Math.round(360*a/59)+"deg)")};/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(o=!0),u.find(".td-time span").on("click",function(e){var a=t(this);u.find(".td-time span").removeClass("on"),a.addClass("on");var n=parseInt(a.attr("data-id"));0==a.index()?deg=Math.round(360*n/23):deg=Math.round(360*n/59),p=-1,v=deg,h=deg,k(deg)}),u.find(".td-deg").on("touchstart mousedown",function(e){g(),e.preventDefault(),clearInterval(a),u.find(".td-deg").removeClass("td-n"),u.find(".td-select").removeClass("td-rubber"),d=!0;var n,i,r,s,l=u.offset(),c={y:l.top+u.height()/2,x:l.left+u.width()/2},f=180/Math.PI;u.removeClass("td-rubber"),t(window).on("touchmove mousemove",function(t){1==d&&(o?move=t.originalEvent.touches[0]:move=t,n=c.y-move.pageY,i=c.x-move.pageX,r=Math.atan2(n,i)*f,0>r&&(r=360+r),-1==p&&(p=r),s=Math.floor(r-p+v),0>s?s=360+s:s>360&&(s%=360),k(s))})}),l.mousewheel&&u.on("mousewheel",function(t){t.preventDefault(),u.find(".td-deg").removeClass("td-n"),t.originalEvent.wheelDelta>0?360>=h&&(t.originalEvent.wheelDelta<=120?h++:t.originalEvent.wheelDelta>120&&(h+=20),h>360&&(h=0)):h>=0&&(t.originalEvent.wheelDelta>=-120?h--:t.originalEvent.wheelDelta<-120&&(h-=20),0>h&&(h=360)),p=-1,v=h,k(h)}),t(document).on("touchend mouseup",function(){d&&(d=!1,l.autoswitch&&(u.find(".td-time span").toggleClass("on"),u.find(".td-time span.on").click()),u.find(".td-deg").addClass("td-n"),u.find(".td-select").addClass("td-rubber"),(l.earliestTime||l.latestTime)&&b())});var M=function(t){var e,a,d=new Date,o=u.find(".td-time span:first"),r=u.find(".td-time span:last");if(n.val().length&&!l.setCurrentTime){var s,c=/\d+/g,f=n.val().split(":");f?(e=f[0].match(c),a=f[1].match(c),-1!=n.val().indexOf("am")||-1!=n.val().indexOf("AM")||-1!=n.val().indexOf("pm")||-1!=n.val().indexOf("PM")?(s=-1!=n.val().indexOf("am")||-1!=n.val().indexOf("AM")?!0:!1,s?12==e&&(e=0):13>e&&(e=parseInt(e)+12,24==e&&(e=0))):24==e&&(e=0)):(e=i(parseInt(o.text())?o.text():d.getHours()),a=i(parseInt(r.text())?r.text():d.getMinutes()))}else e=i(parseInt(o.text())?o.text():d.getHours()),a=i(parseInt(r.text())?r.text():d.getMinutes());x(e,a)};M(),n.focus(function(t){t.preventDefault(),n.blur()}),n.click(function(t){clearInterval(s),c.removeClass("td-fadeout"),c.addClass("td-show").addClass("td-"+l.init_animation),u.css({top:n.offset().top+(n.outerHeight()-8),left:n.offset().left+n.outerWidth()/2-u.outerWidth()/2}),u.hasClass("td-init")&&(a=setInterval(function(){u.find(".td-select").addClass("td-alert"),setTimeout(function(){u.find(".td-select").removeClass("td-alert")},1e3)},2e3),u.removeClass("td-init"))}),f.click(function(){c.addClass("td-fadeout").removeClass("td-"+l.init_animation),s=setTimeout(function(){c.removeClass("td-show")},300)}),t(window).on("resize",function(){g(),u.css({top:n.offset().top+(n.outerHeight()-8),left:n.offset().left+n.outerWidth()/2-u.outerWidth()/2})})})}}(jQuery);